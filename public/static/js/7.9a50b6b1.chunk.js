(this["webpackJsonpbeancount-web"]=this["webpackJsonpbeancount-web"]||[]).push([[7],{177:function(e,t,n){},260:function(e,t,n){"use strict";n.r(t);var a=n(10),c=n(11),r=n(13),i=n(12),s=n(71),o=n(254),l=n(269),u=n(270),d=n(139),h=n(263),j=n(251),b=n(265),m=n(268),f=n(249),p=n(103),O=n.n(p),x=n(0),y=n.n(x),v=n(14),g=n(65),k=(n(177),n(1)),w=["form","initialValue"],C=d.a.Option,I={labelCol:{span:4},wrapperCol:{span:16}},R={required:"${label} \u4e0d\u80fd\u4e3a\u7a7a\uff01"},q=function(e){var t=e.form,n=e.initialValue,a=Object(o.a)(e,w);return y.a.useEffect((function(){t.current.setFields([{name:a.name,value:n}])}),[]),Object(k.jsx)(h.a.List,Object(s.a)({},a))},F=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).theme=e.context.theme,e.formRef=y.a.createRef(),e.state={loading:!1,accounts:[]},e.queryAllAccounts=function(){O()("/api/account").then((function(e){return e.json()})).then((function(t){200===t.code&&e.setState({accounts:t.data})})).catch(console.error)},e.handleResetForm=function(){e.formRef.current.resetFields()},e.handleSubmit=function(t){console.log(t),O()("/api/entry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),200===t.code?(j.b.success("\u8bf7\u6c42\u6210\u529f"),e.handleResetForm()):1001===t.code?j.b.error("\u8d26\u76ee\u4e0d\u5e73\u8861"):j.b.error("\u8bf7\u6c42\u9519\u8bef")})).catch((function(e){j.b.error("\u8bf7\u6c42\u9519\u8bef")}))},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.queryAllAccounts()}},{key:"render",value:function(){var e=this;return this.context.theme!==this.theme&&(this.theme=this.context.theme),Object(k.jsx)("div",{className:"add-entry-page page",children:Object(k.jsxs)(h.a,Object(s.a)(Object(s.a)({},I),{},{size:"middle",ref:this.formRef,onFinish:this.handleSubmit,validateMessages:R,children:[Object(k.jsx)(h.a.Item,{name:"date",label:"\u65f6\u95f4",rules:[{required:!0}],children:Object(k.jsx)(b.a,{type:"date",placeholder:"\u65f6\u95f4"})}),Object(k.jsx)(h.a.Item,{name:"payee",label:"\u6536\u6b3e\u4eba",children:Object(k.jsx)(b.a,{placeholder:"\u6536\u6b3e\u4eba"})}),Object(k.jsx)(h.a.Item,{name:"desc",label:"\u63cf\u8ff0",rules:[{required:!0}],children:Object(k.jsx)(b.a,{placeholder:"\u63cf\u8ff0"})}),Object(k.jsx)(h.a.Item,{label:"\u8d26\u76ee\u660e\u7ec6",children:Object(k.jsx)(q,{form:this.formRef,name:"entries",children:function(t,n){var a=n.add,c=n.remove;return Object(k.jsxs)("div",{children:[t.map((function(t){return Object(k.jsxs)(m.b,{style:{display:"flex",marginBottom:8},align:"start",children:[Object(k.jsx)(h.a.Item,{name:[t.name,"account"],fieldKey:[t.fieldKey,"account"],rules:[{required:!0,message:"\u5fc5\u8f93\u9879"}],children:Object(k.jsx)(d.a,{showSearch:!0,style:{width:200},placeholder:"\u9009\u62e9\u8d26\u6237",optionFilterProp:"children",children:e.state.accounts.map((function(e){return Object(k.jsx)(C,{value:e,children:e})}))})}),Object(k.jsx)(h.a.Item,{name:[t.name,"amount"],fieldKey:[t.fieldKey,"amount"],rules:[{required:!0,message:"\u5fc5\u8f93\u9879"}],children:Object(k.jsx)(b.a,{type:"number",placeholder:"\u91d1\u989d"})}),Object(k.jsx)(l.a,{onClick:function(){c(t.name)}})]},t.key)})),Object(k.jsx)(h.a.Item,{children:Object(k.jsxs)(f.a,{type:"dashed",onClick:function(){a()},block:!0,children:[Object(k.jsx)(u.a,{})," \u6dfb\u52a0\u8d26\u76ee"]})})]})}})}),Object(k.jsxs)(h.a.Item,{wrapperCol:Object(s.a)(Object(s.a)({},I.wrapperCol),{},{offset:4}),children:[Object(k.jsx)(f.a,{htmlType:"button",disabled:this.state.loading,onClick:this.handleResetForm,children:"\u91cd\u7f6e"}),"\xa0\xa0",Object(k.jsx)(f.a,{type:"primary",htmlType:"submit",loading:this.state.loading,children:"\u63d0\u4ea4"})]})]}))})}}]),n}(x.Component);F.contextType=v.a,t.default=Object(g.a)(F)},65:function(e,t,n){"use strict";var a=n(71),c=n(10),r=n(11),i=n(13),s=n(12),o=n(0),l=n(1);t.a=function(e){return function(t){Object(i.a)(o,t);var n=Object(s.a)(o);function o(){return Object(c.a)(this,o),n.apply(this,arguments)}return Object(r.a)(o,[{key:"render",value:function(){return Object(l.jsx)(e,Object(a.a)({},this.props))}}]),o}(o.Component)}}}]);